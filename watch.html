<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>World Clock • Analog + Digital • Stopwatch • Timer</title>
<style>
  :root{
    --bg1:#0f1226; --bg2:#1a1f3a;
    --card:rgba(255,255,255,.08);
    --card-border:rgba(255,255,255,.18);
    --text:#f3f6ff;
    --muted:#a9b2d1;
    --accent:#8be9fd;
    --accent2:#b28dff;
    --danger:#ff6b6b;
    --success:#4cd964;
    --shadow:0 10px 30px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    color:var(--text);
    background: radial-gradient(1200px 800px at 20% 0%, #20244a 0%, transparent 60%),
                radial-gradient(1200px 800px at 100% 100%, #2b2458 0%, transparent 55%),
                linear-gradient(160deg,var(--bg1),var(--bg2));
    display:flex; flex-direction:column; gap:16px;
  }
  header{
    padding:16px 20px 0; text-align:center;
  }
  h1{margin:0; font-size:clamp(20px,3.4vw,36px); letter-spacing:.3px}
  .sub{color:var(--muted); margin-top:6px; font-size:clamp(12px,2.3vw,14px)}

  .controls{
    padding:8px 16px 0;
    display:grid; grid-template-columns: 1fr auto;
    gap:10px; align-items:center; max-width:1050px; width:100%;
    margin:0 auto;
  }
  .select-wrap{
    display:flex; gap:10px; width:100%;
  }
  select, input[type="text"], input[type="number"], button{
    border:1px solid var(--card-border);
    background:var(--card); color:var(--text);
    border-radius:10px; padding:10px 12px; font-size:15px;
    outline:none;
    transition:.2s border, .2s transform, .2s background;
    backdrop-filter: blur(8px);
  }
  select:focus, input:focus{border-color:var(--accent)}
  .now-btn{
    white-space:nowrap; border-color:transparent;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    color:#0d0f1b; font-weight:600;
  }
  .now-btn:active{transform:translateY(1px)}

  main{
    width:100%; max-width:1050px; margin:2px auto 24px;
    display:grid; gap:16px;
    grid-template-columns: repeat(12, 1fr);
    padding:0 16px;
  }
  .card{
    grid-column: span 12;
    background:var(--card);
    border:1px solid var(--card-border);
    border-radius:18px; padding:16px;
    box-shadow:var(--shadow);
    backdrop-filter: blur(10px);
  }
  .card h2{margin:0 0 12px; font-size:18px; color:#e7e9ff}
  .muted{color:var(--muted); font-size:13px}
  .split{
    display:grid; grid-template-columns: 1fr 1fr; gap:16px;
  }

  /* Clock layout */
  .clock-wrap{display:flex; gap:18px; align-items:center; justify-content:center; flex-wrap:wrap}
  .digital{
    font-variant-numeric: tabular-nums;
    font-size: clamp(24px, 6vw, 44px);
    line-height:1;
  }
  .date-line{color:var(--muted); margin-top:6px; font-size:14px; text-align:center}
  .tz-line{color:var(--muted); font-size:12px; text-align:center}

  /* Analog clock */
  .analog{
    width:min(280px, 70vw);
    aspect-ratio:1;
    border-radius:50%;
    position:relative;
    background:
      radial-gradient(circle at 50% 50%, rgba(255,255,255,.08) 0 35%, transparent 36%),
      radial-gradient(circle at 50% 50%, rgba(255,255,255,.12) 0 2px, transparent 3px),
      radial-gradient(circle at 50% 50%, rgba(0,0,0,.25) 70%, rgba(0,0,0,.5) 100%);
    box-shadow: inset 0 0 0 2px rgba(255,255,255,.05), var(--shadow);
    border:1px solid var(--card-border);
  }
  .tick{position:absolute; left:50%; top:50%; transform-origin: 0 0}
  .tick div{width:2px; height:8px; background:#cfd6ff; opacity:.65; transform: translate(-1px, -100px)}
  .tick.big div{height:12px; width:3px; background:#fff; opacity:.9; transform: translate(-1.5px, -100px)}
  .hand{position:absolute; left:50%; top:50%; transform-origin: 50% 90%;}
  .hand.h{width:6px; height:28%; background:#fff; border-radius:6px; transform:translate(-50%,-90%) rotate(0)}
  .hand.m{width:4px; height:38%; background:#cde2ff; border-radius:6px; transform:translate(-50%,-90%) rotate(0)}
  .hand.s{width:2px; height:44%; background:#ffb3b3; border-radius:6px; transform:translate(-50%,-90%) rotate(0)}
  .pin{position:absolute; left:50%; top:50%; width:12px; height:12px; background:#fff; border-radius:50%; transform:translate(-50%,-50%); box-shadow:0 0 0 3px rgba(0,0,0,.25)}

  /* Stopwatch & Timer */
  .time-large{font-variant-numeric:tabular-nums; font-size: clamp(24px, 6vw, 40px)}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .pill{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,.06); font-size:12px; color:var(--muted)}
  .btn{
    border:1px solid var(--card-border);
    background:rgba(255,255,255,.08); color:var(--text);
    border-radius:10px; padding:10px 12px; font-size:15px; cursor:pointer;
  }
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#0d0f1b; font-weight:700; border-color:transparent}
  .btn.danger{background: linear-gradient(135deg,#ff9aa2,#ff6b6b)}
  .btn.success{background: linear-gradient(135deg,#7ef7c6,#4cd964)}
  .grid-2{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
  .laps{max-height:200px; overflow:auto; padding-right:6px}
  .laps .item{display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px dashed rgba(255,255,255,.1); font-size:14px}
  .hint{font-size:12px; color:var(--muted); margin-top:6px}

  /* Responsive */
  @media (min-width: 820px){
    .card.span-6{grid-column: span 6}
    .card.span-8{grid-column: span 8}
    .card.span-4{grid-column: span 4}
  }
  /* Dropdown styling */
select {
  background-color: #1e1e2f;  /* Dark background */
  color: #fff;               /* White text */
  border: 1px solid #444;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 16px;
  cursor: pointer;
}

/* Dropdown options */
select option {
  background-color: #1e1e2f;  /* Dark background for options */
  color: #fff;                /* White text */
  padding: 8px;
}

/* Hover effect for options */
select option:hover {
  background-color: #3a3a5a;
}

</style>
</head>
<body>
  <header>
    <h1>World Clock • Stopwatch • Timer</h1>
    <div class="sub">Analog + digital time with seconds • Pick a city/time zone • Fully responsive</div>
  </header>

  <section class="controls">
    <div class="select-wrap">
      <select id="city">
        <!-- Common time zones (add more if you like) -->
        <option value="Asia/Kolkata" selected>🇮🇳 Ahmedabad / India (IST)</option>
        <option value="Asia/Kolkata">🇮🇳 Mumbai / Delhi (IST)</option>
        <option value="Asia/Kolkata">🇮🇳 Kolkata / Chennai (IST)</option>
        <option value="UTC">🌍 UTC</option>
        <option value="Europe/London">🇬🇧 London (GMT/BST)</option>
        <option value="Europe/Paris">🇫🇷 Paris</option>
        <option value="Europe/Berlin">🇩🇪 Berlin</option>
        <option value="Europe/Moscow">🇷🇺 Moscow</option>
        <option value="Asia/Dubai">🇦🇪 Dubai</option>
        <option value="Asia/Singapore">🇸🇬 Singapore</option>
        <option value="Asia/Hong_Kong">🇭🇰 Hong Kong</option>
        <option value="Asia/Tokyo">🇯🇵 Tokyo</option>
        <option value="Australia/Sydney">🇦🇺 Sydney</option>
        <option value="Africa/Johannesburg">🇿🇦 Johannesburg</option>
        <option value="America/Mexico_City">🇲🇽 Mexico City</option>
        <option value="America/Sao_Paulo">🇧🇷 São Paulo</option>
        <option value="America/Toronto">🇨🇦 Toronto</option>
        <option value="America/New_York">🇺🇸 New York</option>
        <option value="America/Chicago">🇺🇸 Chicago</option>
        <option value="America/Denver">🇺🇸 Denver</option>
        <option value="America/Los_Angeles">🇺🇸 Los Angeles</option>
      </select>
      <button class="now-btn" id="useLocal">Use device time</button>
    </div>
  </section>

  <main>
    <!-- CLOCK -->
    <section class="card span-8" id="clockCard">
      <h2>World Clock</h2>
      <div class="clock-wrap">
        <div class="analog" id="analog">
          <!-- 12 big ticks & 48 small -->
        </div>
        <div>
          <div class="digital" id="digital">--:--:--</div>
          <div class="date-line" id="dateLine">—</div>
          <div class="tz-line" id="tzLine">—</div>
        </div>
      </div>
      <div class="hint">Tip: choose a city above • seconds are accurate to your device clock</div>
    </section>

    <!-- STOPWATCH -->
    <section class="card span-4">
      <h2>Stopwatch</h2>
      <div class="time-large" id="swDisplay">00:00.00</div>
      <div class="row" style="margin-top:10px">
        <button class="btn primary" id="swStart">Start</button>
        <button class="btn" id="swLap">Lap</button>
        <button class="btn danger" id="swReset">Reset</button>
      </div>
      <div class="laps" id="swLaps" style="margin-top:10px"></div>
    </section>

    <!-- TIMER -->
    <section class="card span-6">
      <h2>Timer</h2>
      <div class="grid-2">
        <label>
          <div class="pill">Minutes</div>
          <input type="number" id="tmMin" min="0" value="0" placeholder="0" />
        </label>
        <label>
          <div class="pill">Seconds</div>
          <input type="number" id="tmSec" min="0" max="59" value="30" placeholder="0" />
        </label>
      </div>
      <div class="time-large" id="tmDisplay" style="margin-top:10px">00:30</div>
      <div class="row" style="margin-top:10px">
        <button class="btn success" id="tmStart">Start</button>
        <button class="btn" id="tmPause">Pause</button>
        <button class="btn danger" id="tmReset">Reset</button>
      </div>
      <div class="hint">Optional beep plays when the timer finishes (uses your browser’s audio)</div>
      <audio id="beep"></audio>
    </section>

    <!-- INFO -->
    <section class="card span-6">
      <h2>About</h2>
      <div class="muted">
        This page shows an analog clock synced to the selected time zone along with a digital clock and date.
        It also includes a millisecond-accurate stopwatch and a countdown timer.
      </div>
    </section>
  </main>

<script>
  /* ---------- Utilities ---------- */
  const $ = s => document.querySelector(s);
  const pad = (n, w=2) => String(n).padStart(w,'0');

  /* ---------- Time Zone Clock ---------- */
  let currentTZ = 'Asia/Kolkata';
  const citySel = $('#city');
  const useLocalBtn = $('#useLocal');

  citySel.addEventListener('change', ()=> {
    currentTZ = citySel.value;
    updateTZLine();
  });
  useLocalBtn.addEventListener('click', ()=>{
    currentTZ = Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';
    citySel.value = currentTZ; // will fail silently if not in list
    updateTZLine();
  });

  function getTZParts(date, tz){
    const fmt = new Intl.DateTimeFormat('en-GB',{
      timeZone: tz, hour12:false,
      weekday:'short', day:'2-digit', month:'short', year:'numeric',
      hour:'2-digit', minute:'2-digit', second:'2-digit', timeZoneName:'short'
    }).formatToParts(date);
    const o = {};
    for (const p of fmt) o[p.type]=p.value;
    // hours may be "24" edge case — normalize:
    let h = parseInt(o.hour,10)%24, m = parseInt(o.minute,10), s = parseInt(o.second,10);
    return { h, m, s, dateStr: `${o.weekday}, ${o.day} ${o.month} ${o.year}`, tzName: o.timeZoneName || tz };
  }

  const digital = $('#digital'), dateLine = $('#dateLine'), tzLine = $('#tzLine');

  function updateTZLine(){
    const { tzName } = getTZParts(new Date(), currentTZ);
    tzLine.textContent = `Time Zone: ${currentTZ} (${tzName})`;
  }

  /* ---------- Analog Clock Build ---------- */
  const analog = $('#analog');
  // Build ticks
  for(let i=0;i<60;i++){
    const t = document.createElement('div');
    t.className = 'tick'+(i%5===0 ? ' big':'' );
    t.style.transform = `translate(-50%,-50%) rotate(${i*6}deg)`;
    t.innerHTML = `<div></div>`;
    analog.appendChild(t);
  }
  // Hands
  const hHand = document.createElement('div'); hHand.className='hand h';
  const mHand = document.createElement('div'); mHand.className='hand m';
  const sHand = document.createElement('div'); sHand.className='hand s';
  const pin = document.createElement('div'); pin.className='pin';
  analog.append(hHand,mHand,sHand,pin);

  function renderClock(){
    const now = new Date();
    const {h,m,s,dateStr} = getTZParts(now, currentTZ);

    // digital
    digital.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    dateLine.textContent = dateStr;

    // analog
    const hAngle = ((h%12) * 30) + (m * 0.5) + (s * (0.5/60));
    const mAngle = (m * 6) + (s * 0.1);
    const sAngle = s * 6;
    hHand.style.transform = `translate(-50%,-90%) rotate(${hAngle}deg)`;
    mHand.style.transform = `translate(-50%,-90%) rotate(${mAngle}deg)`;
    sHand.style.transform = `translate(-50%,-90%) rotate(${sAngle}deg)`;
    requestAnimationFrame(renderClock);
  }
  updateTZLine();
  renderClock();

  /* ---------- Stopwatch ---------- */
  const swDisplay = $('#swDisplay');
  const swStart = $('#swStart'), swLap = $('#swLap'), swReset = $('#swReset'), swLaps = $('#swLaps');

  let swRunning = false, swStartTS = 0, swElapsed = 0, swRAF = null, lapCount = 0, lastLapAt = 0;

  function fmtStopwatch(ms){
    const total = Math.floor(ms/10); // centiseconds
    const cs = total%100;
    const s = Math.floor(total/100)%60;
    const m = Math.floor(total/6000);
    return `${pad(m)}:${pad(s)}.${pad(cs)}`;
  }
  function tickSW(){
    const now = performance.now();
    const dur = swElapsed + (now - swStartTS);
    swDisplay.textContent = fmtStopwatch(dur);
    swRAF = requestAnimationFrame(tickSW);
  }
  swStart.addEventListener('click', ()=>{
    if(!swRunning){
      swRunning = true;
      swStart.textContent='Pause';
      swStartTS = performance.now();
      swRAF = requestAnimationFrame(tickSW);
    }else{
      // pause
      swRunning = false;
      swStart.textContent='Resume';
      cancelAnimationFrame(swRAF);
      swElapsed += performance.now() - swStartTS;
    }
  });
  swReset.addEventListener('click', ()=>{
    swRunning=false; swElapsed=0; lastLapAt=0; lapCount=0;
    swStart.textContent='Start';
    cancelAnimationFrame(swRAF);
    swDisplay.textContent='00:00.00';
    swLaps.innerHTML='';
  });
  swLap.addEventListener('click', ()=>{
    const now = swRunning ? (swElapsed + (performance.now()-swStartTS)) : swElapsed;
    if(now===0) return;
    lapCount++;
    const lapDur = now - lastLapAt;
    lastLapAt = now;
    const d = document.createElement('div');
    d.className='item';
    d.innerHTML = `<span>Lap ${lapCount}</span><span>${fmtStopwatch(lapDur)}</span>`;
    swLaps.prepend(d);
  });

  /* ---------- Timer ---------- */
  const tmMin = $('#tmMin'), tmSec = $('#tmSec'), tmDisplay = $('#tmDisplay');
  const tmStart = $('#tmStart'), tmPause = $('#tmPause'), tmReset = $('#tmReset');
  const beepEl = $('#beep');

  let tmTotal = 30*1000;
  let tmLeft = tmTotal, tmRunning=false, tmStartTS=0, tmRAF=null;

  function syncTimerFromInputs(){
    const mins = Math.max(0, parseInt(tmMin.value || '0',10));
    const secs = Math.min(59, Math.max(0, parseInt(tmSec.value || '0',10)));
    tmTotal = (mins*60 + secs)*1000;
    tmLeft = tmTotal;
    renderTimer(tmLeft);
  }
  function renderTimer(ms){
    ms = Math.max(0, ms|0);
    const totalSec = Math.ceil(ms/1000);
    const m = Math.floor(totalSec/60);
    const s = totalSec%60;
    tmDisplay.textContent = `${pad(m)}:${pad(s)}`;
  }
  function tickTimer(){
    const now = performance.now();
    tmLeft = tmTotal - (now - tmStartTS);
    renderTimer(tmLeft);
    if (tmLeft <= 0){
      tmRunning = false;
      cancelAnimationFrame(tmRAF);
      renderTimer(0);
      playBeep();
      tmStart.textContent='Restart';
      return;
    }
    tmRAF = requestAnimationFrame(tickTimer);
  }
  function playBeep(){
    // Generate a short beep via Web Audio
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type='sine'; o.frequency.setValueAtTime(880, ctx.currentTime);
    g.gain.setValueAtTime(0.0001, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.3, ctx.currentTime+0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.35);
    o.connect(g).connect(ctx.destination);
    o.start(); o.stop(ctx.currentTime+0.4);
  }

  tmMin.addEventListener('input', syncTimerFromInputs);
  tmSec.addEventListener('input', syncTimerFromInputs);
  syncTimerFromInputs();

  tmStart.addEventListener('click', ()=>{
    if(!tmRunning){
      // (Re)start
      tmRunning=true;
      tmStart.textContent='Running…';
      tmStartTS = performance.now() - (tmTotal - tmLeft);
      tmRAF = requestAnimationFrame(tickTimer);
    }
  });
  tmPause.addEventListener('click', ()=>{
    if(tmRunning){
      tmRunning=false;
      cancelAnimationFrame(tmRAF);
      tmTotal = tmLeft;
      tmStart.textContent='Resume';
    }
  });
  tmReset.addEventListener('click', ()=>{
    tmRunning=false;
    cancelAnimationFrame(tmRAF);
    syncTimerFromInputs();
    tmStart.textContent='Start';
  });

  /* Initialize UI to device TZ if available */
  (function init(){
    const deviceTZ = Intl.DateTimeFormat().resolvedOptions().timeZone;
    if(deviceTZ){ currentTZ = deviceTZ; updateTZLine(); }
  })();
</script>
</body>
</html>