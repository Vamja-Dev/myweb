<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snake & Ladder — Classic Deluxe</title>
  <style>
    :root{
      --bg:#0b0f1a;
      --panel:#0f1629;
      --panel-2:#121a30;
      --accent:#ffc83d;
      --accent-2:#ff7b3d;
      --good:#27e29d;
      --warn:#ffb020;
      --bad:#ff4d6d;
      --grid:#295116;
      --text:#0e1a1a;
      --muted:#173a2a;
      --board-edge:#f6d66f;
      --board-edge-2:#e0a232;
      --shadow: 0 14px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 1200px at 10% 10%, #173b2a 0, #0b0f1a 70%), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 100 100"><g fill="none" stroke="%231e3b24" stroke-opacity="0.15" stroke-width="1"><path d="M0 50 H100"/><path d="M50 0 V100"/></g></svg>');
      color:#0d1c18; font: 600 16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      display:flex; flex-direction:column; align-items:center; gap:16px;
    }
    header{
      width:min(1200px,95vw); margin-top:14px;
      display:grid; grid-template-columns: 1fr auto; gap:12px; align-items:center;
      color:#fef7df;
    }
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      width:46px; aspect-ratio:1; border-radius:12px; background: conic-gradient(from 0deg, #ffec99, #ffd166, #faae2b, #ffd166);
      box-shadow:0 10px 26px rgba(255,214,102,.35), inset 0 0 24px rgba(255,255,255,.15);
      position:relative; border:2px solid #f6d66f;
    }
    .logo::after{content:""; position:absolute; inset:8px; border-radius:10px; background: radial-gradient(circle at 30% 30%, #fff6, #fff0 60%)}
    h1{margin:0; font-weight:900; letter-spacing:.3px; color:#fff1bf; text-shadow:0 2px 0 #c88a1f}
    .controls{
      width:min(1200px,95vw);
      background: linear-gradient(180deg,var(--panel),var(--panel-2));
      border:1px solid #22315d; border-radius:18px; padding:14px; box-shadow: var(--shadow);
      display:grid; gap:12px; grid-template-columns: 1fr 1fr 1fr 1fr; align-items:end;
      color:#e6eefc
    }
    .controls > div{display:flex; flex-direction:column; gap:8px}
    label{font-size:.85rem; color:#cfe3ff99}
    input[type="text"], select{
      background:#0c1430; border:1px solid #243762; color:#fff;
      border-radius:12px; padding:10px 12px; outline:none; box-shadow: inset 0 1px 0 #ffffff0d;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .btn{
      appearance:none; border:0; padding:12px 16px; border-radius:14px; 
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:#23160a; font-weight:900; letter-spacing:.3px; cursor:pointer;
      box-shadow:0 12px 28px rgba(255,200,61,.32);
      transition: transform .06s ease;
    }
    .btn:hover{transform: translateY(-1px)}
    .btn.secondary{background:#0e1731; color:#fff; border:1px solid #253a6d; box-shadow:none}

    .layout{width:min(1200px,95vw); display:grid; gap:16px; grid-template-columns: 1.2fr .8fr}
    @media (max-width: 1000px){.layout{grid-template-columns:1fr}}

    /* Board */
    .board-wrap{background: linear-gradient(180deg,#0d1327,#0a1022); border:1px solid #22315d; border-radius:18px; padding:14px; box-shadow:var(--shadow)}
    .board{position:relative; width:100%; aspect-ratio:1; background:linear-gradient(180deg,#fef3c7,#fffaf0);
      border-radius:18px; overflow:hidden; border:10px solid var(--board-edge); box-shadow: inset 0 0 0 4px var(--board-edge-2), inset 0 0 0 10px #fef7df}
    .board::before{content:""; position:absolute; inset:0; pointer-events:none; background: radial-gradient(800px 800px at 50% 50%, #ffffff00 0, #00000015 80%)}
    .grid{position:absolute; inset:16px; display:grid; grid-template-columns: repeat(10,1fr); grid-template-rows: repeat(10,1fr)}
    .cell{border:1px solid #0c5327; display:flex; align-items:flex-start; justify-content:flex-end; padding:6px; font-size:1rem; font-weight:900; color:#10321a; text-shadow:0 1px 0 #fff6}

    .nums{position:absolute; inset:0; pointer-events:none}
    .nums span{position:absolute; font-size:.9rem; color:#113614aa; font-weight:900}

    /* SVG overlay for snakes/ladders */
    svg.overlay{position:absolute; inset:16px}

    .ladder{stroke:#a16207; stroke-width:16; fill:none; filter: drop-shadow(0 6px 6px rgba(0,0,0,.35))}
    .ladder-rung{stroke:#eab308; stroke-width:8}

    .snake{stroke-width:22; fill:none; filter: drop-shadow(0 3px 8px rgba(0,0,0,.55))}
    .snake.head{fill:#000}

    /* Tokens */
    .tokens{position:absolute; inset:16px; pointer-events:none}
    .token{position:absolute; width:3.8%; aspect-ratio:1; border-radius:50%;
      box-shadow:0 6px 12px rgba(0,0,0,.55), inset 0 -4px 10px rgba(0,0,0,.4);
      transform: translate(-50%,-50%); display:grid; place-items:center; font-weight:900; font-size:.8rem; color:#000}
    .token::after{content:""; position:absolute; inset:0; border-radius:50%;
      background: radial-gradient(60% 60% at 30% 30%, #fff8, #fff0 70%)}

    /* Dice */
    .side{background:linear-gradient(180deg,var(--panel),var(--panel-2)); border:1px solid #22315d; border-radius:18px; padding:14px; box-shadow:var(--shadow); color:#e9f1ff}
    .dice-area{display:flex; align-items:center; gap:14px; flex-wrap:wrap}
    .dice{
      width:88px; height:88px; perspective:700px; cursor:pointer; position:relative;
    }
    .cube{width:100%; height:100%; position:absolute; transform-style:preserve-3d; transition: transform 1s cubic-bezier(.22,1,.36,1)}
    .face{position:absolute; width:100%; height:100%; background:#fff; border-radius:12px; display:grid; place-items:center; font-size:44px; color:#111;
      box-shadow: inset 0 0 0 6px #eaeaea;
    }
    .face::after{content:""; position:absolute; inset:0; border-radius:12px; background: radial-gradient(circle at 30% 30%, #0001, transparent 60%)}
    .face:nth-child(1){transform: rotateY(0deg) translateZ(44px)}
    .face:nth-child(2){transform: rotateY(90deg) translateZ(44px)}
    .face:nth-child(3){transform: rotateY(180deg) translateZ(44px)}
    .face:nth-child(4){transform: rotateY(-90deg) translateZ(44px)}
    .face:nth-child(5){transform: rotateX(90deg) translateZ(44px)}
    .face:nth-child(6){transform: rotateX(-90deg) translateZ(44px)}

    .turn{
      padding:10px 14px; border-radius:12px; background:#0f1a3a; border:1px solid #233560;
      display:flex; align-items:center; gap:10px; font-weight:800
    }
    .dot{width:12px; aspect-ratio:1; border-radius:50%}

    .log{height:220px; overflow:auto; border-radius:12px; background:#0b122a; border:1px solid #22315d; padding:10px}
    .log p{margin:.25rem 0; color:#d7def7}

    .footer{opacity:.8; font-size:.9rem; margin-bottom:16px; color:#f7ffe8}

    .hidden{display:none !important}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>Snake & Ladder — Classic Deluxe</h1>
        <div style="color:#fff1bfcc; font-size:.95rem">Classic green/yellow board • Play 2–4 players • AIs included • 3D dice</div>
      </div>
    </div>
    <div class="row">
      <button class="btn secondary" id="btnReset">Reset</button>
    </div>
  </header>

  <section class="controls" id="setup">
    <div>
      <label>Total Players</label>
      <select id="playerCount">
        <option value="2">2 Players</option>
        <option value="3">3 Players</option>
        <option value="4">4 Players</option>
      </select>
    </div>
    <div>
      <label>Fill remaining with AI?</label>
      <select id="fillAI">
        <option value="yes">Yes — add AI</option>
        <option value="no">No — all humans</option>
      </select>
    </div>
    <div>
      <label>Human Player Names</label>
      <div class="row" id="nameInputs"></div>
    </div>
    <div>
      <label>&nbsp;</label>
      <button id="btnStart" class="btn">Start Game</button>
    </div>
  </section>

  <section class="layout">
    <div class="board-wrap">
      <div class="board" id="board">
        <div class="grid" id="grid"></div>
        <svg class="overlay" id="overlay" viewBox="0 0 1000 1000" preserveAspectRatio="none"></svg>
        <div class="tokens" id="tokens"></div>
      </div>
    </div>
    <aside class="side">
      <div class="dice-area">
        <div class="dice" id="dice" title="Roll the dice (or press R)">
          <div class="cube" id="cube">
            <div class="face">1</div>
            <div class="face">2</div>
            <div class="face">3</div>
            <div class="face">4</div>
            <div class="face">5</div>
            <div class="face">6</div>
          </div>
        </div>
        <div class="turn" id="turnInfo"><span class="dot" id="turnDot"></span><span id="turnText">—</span></div>
        <button class="btn" id="btnAuto">Auto (AI)</button>
      </div>
      <div style="height:10px"></div>
      <div class="log" id="log"></div>
    </aside>
  </section>

  <div class="footer">Rules: Roll to move. Ladders go up, snakes slide down. Land exactly on 100 to win.</div>

  <script>
    // === Utility helpers ===
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];
    const logEl = $('#log');
    const log = (msg) => { const p = document.createElement('p'); p.textContent = msg; logEl.prepend(p); };

    // === Board setup ===
    const grid = $('#grid');
    const overlay = $('#overlay');
    const tokensLayer = $('#tokens');

    // Create 10x10 grid with classic green/yellow palette
    const lightGreen = '#b7f0a2';
    const darkGreen  = '#6ed16c';
    const lightYellow= '#fff1b8';
    const darkYellow = '#ffd166';

    function colorFor(r,c){ // r,c: 0..9 from top-left
      // 4-color checker vibe
      const idx = (r%2)*2 + (c%2);
      return [lightGreen, lightYellow, darkYellow, darkGreen][idx];
    }

    for(let r=0;r<10;r++){
      for(let c=0;c<10;c++){
        const i = r*10+c;
        const div = document.createElement('div');
        div.className = 'cell';
        div.style.background = colorFor(r,c);
        div.dataset.idx = (i+1);
        grid.appendChild(div);
      }
    }

    // Map square -> [x,y] percent center positions
    function indexToRC(n){
      const idx = n-1;
      const row = Math.floor(idx/10);
      const rFromBottom = 9 - row;
      const colInRow = idx%10;
      const serp = row%2===0 ? colInRow : 9-colInRow;
      const x = (serp+0.5)*10;
      const y = (rFromBottom+0.5)*10;
      return {x,y}
    }

    // === Numbers layer (bigger, darker) ===
    const numsLayer = document.createElementNS('http://www.w3.org/2000/svg','svg');
    numsLayer.setAttribute('class','nums');
    numsLayer.setAttribute('viewBox','0 0 1000 1000');
    numsLayer.setAttribute('preserveAspectRatio','none');

    function addNumber(n){
      const {x,y} = indexToRC(n);
      const text = document.createElementNS('http://www.w3.org/2000/svg','text');
      text.setAttribute('x', x*10 - 26);
      text.setAttribute('y', (100 - y)*10 + 30);
      text.setAttribute('font-size','24');
      text.setAttribute('font-weight','900');
      text.setAttribute('fill','#113614cc');
      text.textContent = n;
      numsLayer.appendChild(text);
    }

    for(let n=1;n<=100;n++) addNumber(n);
    $('#board').appendChild(numsLayer);

    // === Snakes & Ladders definitions ===
    const ladders = [
      [2,23],[4,14],[8,30],[21,42],[28,84],[36,44],[51,67],[71,91],[80,100]
    ];
    const snakes = [
      [32,10],[48,26],[62,19],[64,60],[88,24],[93,73],[95,75],[98,79]
    ];

    function cellCenter(n){ const {x,y} = indexToRC(n); return {x, y: 100 - y}; }

    // Wood ladders (thicker rails + golden rungs)
    function drawLadders(){
      ladders.forEach(([from,to])=>{
        const a = cellCenter(from), b = cellCenter(to);
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1', a.x*10);
        line.setAttribute('y1', a.y*10);
        line.setAttribute('x2', b.x*10);
        line.setAttribute('y2', b.y*10);
        line.setAttribute('class','ladder');
        overlay.appendChild(line);
        // second rail parallel
        const dx = b.y - a.y; const dy = -(b.x - a.x);
        const len = Math.hypot(dx,dy)||1; const ux = (dx/len)*10; const uy = (dy/len)*10;
        const rail2 = document.createElementNS('http://www.w3.org/2000/svg','line');
        rail2.setAttribute('x1', a.x*10+ux);
        rail2.setAttribute('y1', a.y*10+uy);
        rail2.setAttribute('x2', b.x*10+ux);
        rail2.setAttribute('y2', b.y*10+uy);
        rail2.setAttribute('class','ladder');
        overlay.appendChild(rail2);
        // rungs
        const rungCount = 6;
        for(let i=1;i<rungCount;i++){
          const t = i/rungCount; // 0..1
          const rx = a.x + (b.x-a.x)*t;
          const ry = a.y + (b.y-a.y)*t;
          const rung = document.createElementNS('http://www.w3.org/2000/svg','line');
          rung.setAttribute('x1', rx*10);
          rung.setAttribute('y1', ry*10);
          rung.setAttribute('x2', rx*10+ux);
          rung.setAttribute('y2', ry*10+uy);
          rung.setAttribute('class','ladder-rung');
          overlay.appendChild(rung);
        }
      });
    }

    // Candy-colored snakes with gradient bodies and heads
    function gradient(id, stops){
      const defs = overlay.querySelector('defs') || overlay.insertBefore(document.createElementNS('http://www.w3.org/2000/svg','defs'), overlay.firstChild);
      const g = document.createElementNS('http://www.w3.org/2000/svg','linearGradient');
      g.setAttribute('id', id);
      g.setAttribute('gradientTransform','rotate(45)');
      stops.forEach(([o,c])=>{
        const s = document.createElementNS('http://www.w3.org/2000/svg','stop');
        s.setAttribute('offset',o);
        s.setAttribute('stop-color',c);
        g.appendChild(s);
      });
      defs.appendChild(g);
      return `url(#${id})`;
    }

    const snakePaints = [
      gradient('s1', [['0%','#e11d48'],['50%','#fb7185'],['100%','#f97316']]),
      gradient('s2', [['0%','#22c55e'],['50%','#84cc16'],['100%','#facc15']]),
      gradient('s3', [['0%','#06b6d4'],['50%','#60a5fa'],['100%','#a78bfa']]),
      gradient('s4', [['0%','#f43f5e'],['50%','#f97316'],['100%','#22d3ee']])
    ];

    function drawSnakes(){
      snakes.forEach(([from,to],i)=>{
        const a = cellCenter(from), b = cellCenter(to);
        const c1 = {x:(a.x*9 + b.x*1)/10 + (i%2?5:-5), y:(a.y*7 + b.y*3)/10};
        const c2 = {x:(a.x*3 + b.x*7)/10 + (i%2?-5:5), y:(a.y*3 + b.y*7)/10};
        const d = `M ${a.x*10} ${a.y*10} C ${c1.x*10} ${c1.y*10}, ${c2.x*10} ${c2.y*10}, ${b.x*10} ${b.y*10}`;
        const path = document.createElementNS('http://www.w3.org/2000/svg','path');
        path.setAttribute('d', d);
        path.setAttribute('class','snake');
        path.setAttribute('stroke', snakePaints[i%snakePaints.length]);
        overlay.appendChild(path);
        // head circle at start
        const head = document.createElementNS('http://www.w3.org/2000/svg','circle');
        head.setAttribute('cx', a.x*10);
        head.setAttribute('cy', a.y*10);
        head.setAttribute('r', 14);
        head.setAttribute('fill', snakePaints[i%snakePaints.length]);
        head.setAttribute('stroke','#0a0a0a');
        head.setAttribute('stroke-width','2');
        overlay.appendChild(head);
        // tongue
        const tongue = document.createElementNS('http://www.w3.org/2000/svg','path');
        tongue.setAttribute('d', `M ${a.x*10+10} ${a.y*10-6} l 10 4 l -10 4`);
        tongue.setAttribute('fill','none');
        tongue.setAttribute('stroke','#ef4444');
        tongue.setAttribute('stroke-width','2');
        overlay.appendChild(tongue);
      });
    }

    drawLadders();
    drawSnakes();

    // === Players ===
    const COLORS = [
      {bg:'#ef4444'},
      {bg:'#3b82f6'},
      {bg:'#22c55e'},
      {bg:'#f59e0b'}
    ];

    let players = []; // {name, ai, pos}
    let turn = 0; // index in players
    let rolling = false;

    function tokenEl(i){ return document.querySelector(`.token[data-pi="${i}"]`); }

    function placeToken(i, square){
      const {x,y} = indexToRC(square);
      const container = tokenEl(i);
      const offsetMap = [
        {dx:-2,dy:-2}, {dx:2,dy:-2}, {dx:-2,dy:2}, {dx:2,dy:2}
      ];
      const off = offsetMap[i%4];
      container.style.left = `calc(${x}% + ${off.dx}%)`;
      container.style.top  = `calc(${100-y}% + ${off.dy}%)`;
      container.dataset.square = square;
    }

    function addTokens(){
      tokensLayer.innerHTML = '';
      players.forEach((p,i)=>{
        const d = document.createElement('div');
        d.className = 'token';
        d.dataset.pi = i;
        d.style.background = COLORS[i].bg;
        d.style.boxShadow = `0 6px 12px rgba(0,0,0,.55), 0 0 14px ${COLORS[i].bg}55, inset 0 -4px 10px rgba(0,0,0,.4)`;
        d.textContent = ['A','B','C','D'][i];
        tokensLayer.appendChild(d);
        placeToken(i, 1);
      });
    }

    // === Setup UI ===
    const nameInputs = $('#nameInputs');
    const playerCountSel = $('#playerCount');
    const fillAISel = $('#fillAI');

    function renderNameInputs(){
      const count = Number(playerCountSel.value);
      const fillAI = fillAISel.value === 'yes';
      nameInputs.innerHTML = '';
      const humanMax = fillAI ? 1 : count;
      for(let i=0;i<humanMax;i++){
        const input = document.createElement('input');
        input.type='text'; input.placeholder = `Player ${i+1} name`;
        input.value = i===0 ? 'You' : `P${i+1}`;
        input.dataset.index = i;
        nameInputs.appendChild(input);
      }
    }
    renderNameInputs();
    playerCountSel.addEventListener('change', renderNameInputs);
    fillAISel.addEventListener('change', renderNameInputs);

    $('#btnStart').addEventListener('click', ()=>{
      const count = Number(playerCountSel.value);
      const fillAI = fillAISel.value==='yes';
      const names = $$('input', nameInputs).map(i=>i.value.trim()||i.placeholder);
      players = [];
      const humanCount = fillAI ? 1 : count;
      for(let i=0;i<count;i++){
        players.push({ name: i<humanCount ? names[i] : `AI-${i+1-humanCount+1}`, ai: i>=humanCount, pos: 1 });
      }
      addTokens();
      turn = 0; updateTurnUI();
      log('Game started!');
      $('#setup').classList.add('hidden');
    });

    $('#btnReset').addEventListener('click', ()=>{ location.reload(); });

    // === Dice mechanics ===
    const cube = $('#cube');
    const dice = $('#dice');

    function setCubeToFace(n){
      const map = {
        1: 'rotateX(0deg) rotateY(0deg)',
        2: 'rotateY(-90deg)',
        3: 'rotateY(180deg)',
        4: 'rotateY(90deg)',
        5: 'rotateX(-90deg)',
        6: 'rotateX(90deg)'
      };
      cube.style.transform = `translateZ(0) ${map[n]}`;
    }

    function rollDice(){
      if(rolling || players.length===0) return;
      rolling = true;
      const n = Math.floor(Math.random()*6)+1;
      const rX = 360* (Math.floor(Math.random()*4)+2);
      const rY = 360* (Math.floor(Math.random()*4)+2);
      cube.style.transition = 'transform 1s cubic-bezier(.22,1,.36,1)';
      cube.style.transform = `rotateX(${rX}deg) rotateY(${rY}deg)`;
      setTimeout(()=>{ setCubeToFace(n); onRolled(n); }, 1000);
    }

    dice.addEventListener('click', rollDice);
    document.addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='r') rollDice(); });

    $('#btnAuto').addEventListener('click', ()=>{ if(players[turn]?.ai) rollDice(); });

    // === Movement & turns ===
    function updateTurnUI(){
      const t = players[turn];
      $('#turnText').textContent = `${t.name}'s turn ${t.ai ? '(AI)' : ''}`;
      $('#turnDot').style.background = COLORS[turn].bg;
      if(t.ai){ setTimeout(()=> rollDice(), 700); }
    }

    function moveStep(i, toSquare, cb){
      const p = players[i];
      const cur = p.pos;
      const dir = Math.sign(toSquare - cur);
      const next = cur + dir;
      p.pos = next;
      placeToken(i, next);
      if(next !== toSquare){
        setTimeout(()=> moveStep(i, toSquare, cb), 170);
      } else cb && cb();
    }

    function findSnakeOrLadder(sq){
      const l = ladders.find(([a])=>a===sq);
      if(l) return {to: l[1], type:'ladder'};
      const s = snakes.find(([a])=>a===sq);
      if(s) return {to: s[1], type:'snake'};
      return null;
    }

    function onRolled(n){
      const i = turn; const p = players[i];
      log(`${p.name} rolled a ${n}.`);
      const target = p.pos + n;
      if(target>100){
        log(`${p.name} needs an exact roll to land on 100.`);
        rolling = false; nextTurn(); return;
      }
      moveStep(i, target, ()=>{
        const hit = findSnakeOrLadder(players[i].pos);
        if(hit){
          log(`${p.name} ${hit.type==='ladder'?'climbs a ladder':'got bitten by a snake'}!`);
          setTimeout(()=>{ moveStep(i, hit.to, ()=>{ checkWinOrNext(); }); }, 260);
        } else { checkWinOrNext(); }
      });
    }

    function checkWinOrNext(){
      rolling = false;
      const p = players[turn];
      if(p.pos===100){
        log(`${p.name} WINS! 🎉`);
        alert(`${p.name} wins!`);
      } else { nextTurn(); }
    }

    function nextTurn(){ turn = (turn+1)%players.length; updateTurnUI(); }

    // seed default quick demo
    setTimeout(()=>{
      players = [ {name:'You', ai:false, pos:1}, {name:'AI-1', ai:true, pos:1} ];
      addTokens(); updateTurnUI();
    }, 60);
  </script>
</body>
</html> 
